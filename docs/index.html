<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DefinIT - Data Structures and Algorithms</title>
  <style>
    html,
    body {
      height: 100%;
      margin: 0;
    }

    body {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: #0b0f19;
      color: #e6edf3;
    }

    #app {
      height: 100%;
      display: grid;
      grid-template-columns: 360px 1fr;
    }

    /* Panel layout: top controls + middle scrollable content + bottom controls */
    .panel {
      border-right: 1px solid #1f2a44;
      padding: 12px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panelMain {
      overflow: auto;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 0;
      /* allow flex child to shrink */
      flex: 1 1 auto;
      /* take remaining space so bottom stays pinned */
    }

    .top {
      display: flex;
      gap: 8px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }

    .bottom {
      display: flex;
      gap: 8px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      padding-top: 8px;
      border-top: 1px solid #1f2a44;
      margin-top: auto;
      /* pin to very bottom */
    }

    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #24314f;
      background: #0f1526;
      color: #e6edf3;
      box-sizing: border-box;
      max-width: 100%;
    }

    .btn {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #24314f;
      background: #121a2f;
      color: #e6edf3;
      cursor: pointer;
    }

    .btn:hover {
      background: #162040;
    }

    .btn.active {
      background: #1a2850;
      border-color: #35518f;
    }

    .btn:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      background: #0f1526;
    }

    .btn:disabled:hover {
      background: #0f1526;
    }

    .dagStats {
      display: grid;
      grid-template-columns: 130px 1fr;
      gap: 6px 10px;
      margin-top: 10px;
      font-size: 13px;
    }

    .dagStats div:nth-child(odd) {
      color: #a9b4c0;
    }

    .canvasWrap {
      position: relative;
    }

    svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    .node .node-circle {
      vector-effect: non-scaling-stroke;
    }

    .node text {
      fill: #e6edf3;
      font-size: 11px;
      pointer-events: none;
    }

    /* NOTE: Edge styles are set dynamically in TS based on learning state. */
    .link {
      fill: none;
    }

    /* Fallback classes (TS also sets inline stroke/width) */
    .link.link-on {
      stroke: rgba(226, 232, 240, 0.4);
      stroke-width: 1;
    }

    .link.link-off {
      stroke: rgba(148, 163, 184, 0.16);
      stroke-width: 1;
      stroke-dasharray: 3 5;
    }

    .ring {
      stroke: rgba(56, 189, 248, 0.10);
      fill: none;
    }

    a {
      color: #7dd3fc;
    }

    .viewer {
      margin-top: 12px;
      padding: 10px;
      border: 1px solid #24314f;
      border-radius: 10px;
      background: #0f1526;
    }

    .viewer h3 {
      margin: 0 0 6px 0;
      font-size: 13px;
      color: #e6edf3;
    }

    .viewer .path {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: #a9b4c0;
      margin-bottom: 8px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .viewerBody {
      font-size: 12px;
      line-height: 1.45;
      color: #e6edf3;
      white-space: normal;
    }

    .viewerBody p {
      margin: 0 0 8px 0;
    }

    .viewerBody .dep {
      color: #7dd3fc;
      cursor: pointer;
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 2px;
    }

    .viewerBody .dep:hover {
      color: #bae6fd;
    }

    .viewerActions {
      margin-top: 10px;
      display: flex;
      gap: 8px;
    }

    @keyframes pulseNode {
      0% {
        transform: scale(1);
        opacity: 0.9;
      }

      50% {
        transform: scale(1.9);
        opacity: 1;
      }

      100% {
        transform: scale(1);
        opacity: 0.9;
      }
    }

    /* Apply pulse to the nodes, not the whole <g> so labels stay readable */
    .node.hovering .node-circle {
      transform-box: fill-box;
      transform-origin: center;
      animation: pulseNode 900ms ease-in-out infinite;
      filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.18));
    }

    .ring.hovered {
      stroke: rgba(56, 189, 248, 0.55);
      stroke-width: 2px;
    }
  </style>
  <script type="module" crossorigin src="./assets/index-Bq93mDRE.js"></script>
</head>

<body>
  <div id="app">
    <div class="panel">
      <div class="top">
        <button id="modeDefinitions" class="btn active">Definitions</button>
        <button id="modeCategories" class="btn" disabled title="Temporarily disabled">Categories</button>
      </div>

      <div class="panelMain">
        <div>
          <input id="search" type="text" placeholder="Search node by id/title..." />
        </div>
        <div class="dagStats" id="stats"></div>
        <div class="viewer" id="viewer" style="display:none;">
          <h3 id="viewerTitle"></h3>
          <div class="path" id="viewerPath"></div>
          <div id="viewerBody" class="viewerBody"></div>
          <div class="viewerActions">
            <button id="markLearned" class="btn" style="display:none;">Mark as learned</button>
          </div>
        </div>
      </div>

      <div class="bottom">
        <button id="focus" class="btn">Overview</button>
        <button id="resetProgress" class="btn">Reset progress</button>
      </div>
    </div>
    <div class="canvasWrap">
      <svg id="viz"></svg>
    </div>
  </div>

</body>

</html>